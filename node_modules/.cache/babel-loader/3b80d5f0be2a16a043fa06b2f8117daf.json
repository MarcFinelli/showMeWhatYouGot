{"ast":null,"code":"import _toConsumableArray from\"/Users/marcfinelli/GemHunter/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"/Users/marcfinelli/GemHunter/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/marcfinelli/GemHunter/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import\"./App.css\";import GemSymbol from\"./Gem.png\";import useInterval from\"./interval\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var canvasX=1000;var canvasY=1000;var initialDragon=[[5,10],[5,10]];var initialGem=[14,10];var scale=50;var timeDelay=100;function App(){var canvasRef=useRef(null);var _useState=useState(initialDragon),_useState2=_slicedToArray(_useState,2),dragon=_useState2[0],setDragon=_useState2[1];var _useState3=useState(initialGem),_useState4=_slicedToArray(_useState3,2),gem=_useState4[0],setGem=_useState4[1];var _useState5=useState([0,-1]),_useState6=_slicedToArray(_useState5,2),direction=_useState6[0],setDirection=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),delay=_useState8[0],setDelay=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),gameOver=_useState10[0],setGameOver=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),score=_useState12[0],setScore=_useState12[1];useInterval(function(){return runGame();},delay);useEffect(function(){var Gem=document.getElementById(\"gem\");if(canvasRef.current){var canvas=canvasRef.current;var ctx=canvas.getContext(\"2d\");if(ctx){ctx.setTransform(scale,0,0,scale,0,0);ctx.clearRect(0,0,window.innerWidth,window.innerHeight);ctx.fillStyle=\"#18d907\";dragon.forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),x=_ref2[0],y=_ref2[1];return ctx.fillRect(x,y,1,1);});ctx.drawImage(Gem,gem[0],gem[1],1,1);}}},[dragon,gem,gameOver]);function handleSetScore(){if(score>Number(localStorage.getItem(\"gemScore\"))){localStorage.setItem(\"gemScore\",JSON.stringify(score));}}function play(){setDragon(initialDragon);setGem(initialGem);setDirection([1,0]);setDelay(timeDelay);setScore(0);setGameOver(false);}function checkCollision(head){for(var i=0;i<head.length;i++){if(head[i]<0||head[i]*scale>=canvasX)return true;}var _iterator=_createForOfIteratorHelper(dragon),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var s=_step.value;if(head[0]===s[0]&&head[1]===s[1])return true;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}function gemGet(newDragon){var coord=gem.map(function(){return Math.floor(Math.random()*canvasX/scale);});if(newDragon[0][0]===gem[0]&&newDragon[0][1]===gem[1]){var newGem=coord;setScore(score+1);setGem(newGem);return true;}return false;}function runGame(){var newDragon=_toConsumableArray(dragon);var newDragonPiece=[newDragon[0][0]+direction[0],newDragon[0][1]+direction[1]];newDragon.unshift(newDragonPiece);if(checkCollision(newDragonPiece)){setDelay(null);setGameOver(true);handleSetScore();}if(!gemGet(newDragon)){newDragon.pop();}setDragon(newDragon);}function changeDirection(e){switch(e.key){case\"a\":setDirection([-1,0]);break;case\"w\":setDirection([0,-1]);break;case\"d\":setDirection([1,0]);break;case\"s\":setDirection([0,1]);break;}}return/*#__PURE__*/_jsxs(\"div\",{onKeyDown:function onKeyDown(e){return changeDirection(e);},children:[/*#__PURE__*/_jsx(\"img\",{id:\"gem\",src:GemSymbol,alt:\"gem\",width:\"30\"}),/*#__PURE__*/_jsx(\"canvas\",{className:\"playArea\",ref:canvasRef,width:\"\".concat(canvasX,\"px\"),height:\"\".concat(canvasY,\"px\")}),gameOver&&/*#__PURE__*/_jsx(\"div\",{className:\"gameOver\",children:\"Game Over\"}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Gem Hunter\"}),/*#__PURE__*/_jsx(\"button\",{onClick:play,className:\"playButton\",children:\"Start\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"scoreBox\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Score: \",score]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Best Score: \",localStorage.getItem(\"gemScore\")]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"keyLegend\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"w: up\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"s: down\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"a: left\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"d: right\"})]})]});}export default App;","map":{"version":3,"sources":["/Users/marcfinelli/GemHunter/src/App.tsx"],"names":["React","useEffect","useRef","useState","GemSymbol","useInterval","canvasX","canvasY","initialDragon","initialGem","scale","timeDelay","App","canvasRef","dragon","setDragon","gem","setGem","direction","setDirection","delay","setDelay","gameOver","setGameOver","score","setScore","runGame","Gem","document","getElementById","current","canvas","ctx","getContext","setTransform","clearRect","window","innerWidth","innerHeight","fillStyle","forEach","x","y","fillRect","drawImage","handleSetScore","Number","localStorage","getItem","setItem","JSON","stringify","play","checkCollision","head","i","length","s","gemGet","newDragon","coord","map","Math","floor","random","newGem","newDragonPiece","unshift","pop","changeDirection","e","key"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\"\nimport \"./App.css\"\nimport GemSymbol from \"./Gem.png\"\nimport useInterval from \"./interval\"\n\nconst canvasX = 1000\nconst canvasY = 1000\nconst initialDragon = [ [ 5, 10 ], [ 5, 10 ] ]\nconst initialGem = [ 14, 10 ]\nconst scale = 50\nconst timeDelay = 100\n\nfunction App() {\n\tconst canvasRef = useRef<HTMLCanvasElement | null>(null)\n\tconst [ dragon, setDragon ] = useState(initialDragon)\n\tconst [ gem, setGem ] = useState(initialGem)\n\tconst [ direction, setDirection ] = useState([ 0, -1 ])\n\tconst [ delay, setDelay ] = useState<number | null>(null)\n\tconst [ gameOver, setGameOver ] = useState(false)\n\tconst [ score, setScore ] = useState(0)\n\n\n\tuseInterval(() => runGame(), delay)\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet Gem = document.getElementById(\"gem\") as HTMLCanvasElement\n\t\t\tif (canvasRef.current) {\n\t\t\t\tconst canvas = canvasRef.current\n\t\t\t\tconst ctx = canvas.getContext(\"2d\")\n\t\t\t\tif (ctx) {\n\t\t\t\t\tctx.setTransform(scale, 0, 0, scale, 0, 0)\n\t\t\t\t\tctx.clearRect(0, 0, window.innerWidth, window.innerHeight)\n\t\t\t\t\tctx.fillStyle = \"#18d907\"\n\t\t\t\t\tdragon.forEach(([ x, y ]) => ctx.fillRect(x, y, 1, 1))\n\t\t\t\t\tctx.drawImage(Gem, gem[0], gem[1], 1, 1)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[ dragon, gem, gameOver ]\n\t)\n\n\tfunction handleSetScore() {\n\t\tif (score > Number(localStorage.getItem(\"gemScore\"))) {\n\t\t\tlocalStorage.setItem(\"gemScore\", JSON.stringify(score))\n\t\t}\n\t}\n\n\tfunction play() {\n\t\tsetDragon(initialDragon)\n\t\tsetGem(initialGem)\n\t\tsetDirection([ 1, 0 ])\n\t\tsetDelay(timeDelay)\n\t\tsetScore(0)\n\t\tsetGameOver(false)\n\t}\n\n\tfunction checkCollision(head: number[]) {\n\t\tfor (let i = 0; i < head.length; i++) {\n\t\t\tif (head[i] < 0 || head[i] * scale >= canvasX) return true\n\t\t}\n\t\tfor (const s of dragon) {\n\t\t\tif (head[0] === s[0] && head[1] === s[1]) return true\n\t\t}\n\t\treturn false\n\t}\n\n\tfunction gemGet(newDragon: number[][]) {\n\t\tlet coord = gem.map(() => Math.floor(Math.random() * canvasX / scale))\n\t\tif (newDragon[0][0] === gem[0] && newDragon[0][1] === gem[1]) {\n\t\t\tlet newGem = coord\n\t\t\tsetScore(score + 1)\n\t\t\tsetGem(newGem)\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tfunction runGame() {\n\t\tconst newDragon = [ ...dragon ]\n\t\tconst newDragonPiece = [ newDragon[0][0] + direction[0], newDragon[0][1] + direction[1] ]\n\t\tnewDragon.unshift(newDragonPiece)\n\t\tif (checkCollision(newDragonPiece)) {\n\t\t\tsetDelay(null)\n\t\t\tsetGameOver(true)\n\t\t\thandleSetScore()\n\t\t}\n\t\tif (!gemGet(newDragon)) {\n\t\t\tnewDragon.pop()\n\t\t}\n\t\tsetDragon(newDragon)\n\t}\n\n\tfunction changeDirection(e: React.KeyboardEvent<HTMLDivElement>) {\n\t\tswitch (e.key) {\n\t\t\tcase \"a\":\n\t\t\t\tsetDirection([ -1, 0 ])\n\t\t\t\tbreak\n\t\t\tcase \"w\":\n\t\t\t\tsetDirection([ 0, -1 ])\n\t\t\t\tbreak\n\t\t\tcase \"d\":\n\t\t\t\tsetDirection([ 1, 0 ])\n\t\t\t\tbreak\n\t\t\tcase \"s\":\n\t\t\t\tsetDirection([ 0, 1 ])\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\treturn (\n\t\t<div onKeyDown={(e) => changeDirection(e)}>\n\t\t\t<img id=\"gem\" src={GemSymbol} alt=\"gem\" width=\"30\" />\n\t\t\t<canvas className=\"playArea\" ref={canvasRef} width={`${canvasX}px`} height={`${canvasY}px`} />\n\t\t\t{gameOver && <div className=\"gameOver\">Game Over</div>}\n\t\t\t<div className=\"title\">Gem Hunter</div>\n\t\t\t<button onClick={play} className=\"playButton\">Start</button>\n\t\t\t<div className=\"scoreBox\">\n\t\t\t\t<h2>Score: {score}</h2>\n\t\t\t\t<h2>Best Score: {localStorage.getItem(\"gemScore\")}</h2>\n\t\t\t</div>\n\t\t\t<div className=\"keyLegend\">\n\t\t\t\t<h2>w: up</h2>\n\t\t\t\t<h2>s: down</h2>\n\t\t\t\t<h2>a: left</h2>\n\t\t\t\t<h2>d: right</h2>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}